<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.mmileticc.pluginintellij1st</id>
    <name>pluginIntelliJ1st</name>
    <vendor>mmileticc</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>

    <depends
            optional="true"
            config-file="myPluginId-withKotlin.xml">org.jetbrains.kotlin</depends>

    <resource-bundle>messages.MyBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow factoryClass="com.github.mmileticc.pluginintellij1st.toolWindow.FocusKeeper9000ToolWindowFactory"
                    id="FocusKeeper9000"
                    anchor="right"
                    icon="AllIcons.General.Web"/>
        <toolWindow factoryClass="com.github.mmileticc.pluginintellij1st.toolWindow.TodoToolWindowFactory"
                    id="Code Tasks"
                    anchor="right"
                    icon="AllIcons.Actions.ListFiles"/>
        <postStartupActivity implementation="com.github.mmileticc.pluginintellij1st.startup.MyProjectActivity" />
        <annotator
                language="kotlin"
                implementationClass="com.github.mmileticc.pluginintellij1st.comments.MyCommentAnnotator"/>

        <codeInsight.lineMarkerProvider
                language="kotlin"
                implementationClass="com.github.mmileticc.pluginintellij1st.comments.TodoLineMarkerProvider"/>

        <codeInsight.lineMarkerProvider
                language="kotlin"
                implementationClass="com.github.mmileticc.pluginintellij1st.comments.HelpLineMarkerProvider"/>


    </extensions>

    <actions>

        <!-- Editor popup action (ostaje posebno) -->
        <action id="RoastSelectionAction"
                class="com.github.mmileticc.pluginintellij1st.roasting.RoastSelectionAction"
                text="Roast my code"
                description="Roast selected code and insert a comment above it">
            <keyboard-shortcut
                    keymap="$default"
                    first-keystroke="ctrl alt Q"/>
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>

        <!--  Glavna grupa u Tools meniju -->
        <group id="RoastMainGroup"
               text="Roast Tools"
               popup="true">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>

            <!-- Roast level submenu -->
            <group id="RoastLevelGroup" text="Roast level" popup="true">
                <action id="RoastLevelLow"
                        class="com.github.mmileticc.pluginintellij1st.roasting.RoastLevelLowAction"
                        text="Low"/>
                <action id="RoastLevelMedium"
                        class="com.github.mmileticc.pluginintellij1st.roasting.RoastLevelMediumAction"
                        text="Medium"/>
                <action id="RoastLevelHigh"
                        class="com.github.mmileticc.pluginintellij1st.roasting.RoastLevelHighAction"
                        text="High"/>
            </group>

            <!-- Roast language submenu -->
            <group id="RoastLanguageGroup" text="Roast language" popup="true">
                <action id="RoastLanguageEnglish"
                        class="com.github.mmileticc.pluginintellij1st.roasting.RoastLanguageEnglishAction"
                        text="English"/>
                <action id="RoastLanguageSerbian"
                        class="com.github.mmileticc.pluginintellij1st.roasting.RoastLanguageSerbianAction"
                        text="Serbian"/>
            </group>

            <!-- Delete roast comments -->
            <group id = "DeleteRoastComments" text = "Delete comments" popup = "true">
                <action id="DeleteGeneratedCommentsAction"
                        class="com.github.mmileticc.pluginintellij1st.roasting.DeleteGeneratedCommentsAction"
                        text="Delete all generated comments"
                        description="Removes all generated roast comments from current file">
                    <keyboard-shortcut
                            keymap="$default"
                            first-keystroke="ctrl alt D"/>
                </action>
                <action id="DeleteNiceCommentsAction"
                        class="com.github.mmileticc.pluginintellij1st.roasting.DeleteNiceCommentsAction"
                        text="Delete only NICE comments"
                        description="Removes all generated NICE comments from current file"/>
                <action id="DeleteRoastCommentsAction"
                        class="com.github.mmileticc.pluginintellij1st.roasting.DeleteRoastCommentsAction"
                        text="Delete only ROAST comments"
                        description="Removes all generated ROAST comments from current file"/>
            </group>

        </group>

        <!-- Toolbar button to open FocusKeeper9000 tool window -->
        <action id="FocusKeeper9000OpenAction"
                class="com.github.mmileticc.pluginintellij1st.actions.FocusKeeper9000OpenAction"
                text="FocusKeeper9000"
                description="Open YouTube Shorts panel"
                icon="AllIcons.General.Web">
            <!-- Add to main toolbar (new UI) -->
            <add-to-group group-id="MainToolbarRight" anchor="last"/>
            <!-- Fallback: also add to View menu -->
            <add-to-group group-id="ViewMenu" anchor="last"/>
        </action>

    </actions>



</idea-plugin>
